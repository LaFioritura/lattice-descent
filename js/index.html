<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>NEXUS PROTOCOL ‚Äî Narrative Extended (v3.7.1)</title>
<link rel="stylesheet" href="css/styles.css">
</head>
<body>
<div class="glitch-overlay" id="glitchOverlay"></div>
<div id="loadingScreen">
  <div class="loading-text">NEXUS PROTOCOL</div>
  <div class="loading-bar"><div class="loading-progress" id="loadingBar"></div></div>
  <div style="margin-top:20px;font-size:12px;">INITIALIZING...</div>
  <div class="load-cta"><button id="forceStart" class="action-btn">START</button></div>
</div>

<div id="gameContainer" aria-live="polite">
  <div id="header">
    <div class="stats">
      <div class="stat floor-indicator">
        <span class="led green pulse"></span>
        <span>LEVEL:</span> 
        <span id="floor" class="bracket">[B1]</span>
      </div>
      <div class="stat coherence-indicator">
        <span class="led green" id="coherenceLed"></span>
        <span>COHERENCE:</span> 
        <span id="coherence">100</span>%
        <span class="status-symbol" id="coherenceSymbol">‚óè</span>
      </div>
      <div class="stat">
        <span class="symbol">¬¢</span>
        <span>CLEARANCE:</span> 
        <span id="credits">100</span>
      </div>
      <div class="stat">
        <span class="symbol">‚è±</span>
        <span>CYCLE:</span> 
        <span id="gameTime">00:00</span>
      </div>
    </div>
    <div class="stats">
      <button class="action-btn" id="shopBtn" aria-haspopup="dialog">
        <span class="symbol">üìã</span> REQUISITION
      </button>
      <button class="action-btn" id="invBtn" aria-haspopup="dialog">
        <span class="symbol">üì¶</span> EFFECTS
      </button>
      <button class="action-btn" id="soundBtn" title="Toggle sound">üîä</button>
      <button class="action-btn" id="hudToggle" title="Toggle monitor">
        <span class="symbol">üìä</span> MONITOR
      </button>
    </div>
  </div>

  <div id="terminal" role="log"></div>

  <div id="inputArea">
    <span class="prompt">&gt;</span>
    <input type="text" id="commandInput" placeholder="Enter directive..." autocomplete="off" />
    <button class="action-btn" id="executeBtn">COMMIT</button>
  </div>
</div>

<div id="shopModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="shopTitle">
  <div class="modal-header">
    <h2 id="shopTitle">REQUISITION TERMINAL</h2>
    <span style="cursor:pointer;color:#ff3333;font-size:20px;" id="closeShop" aria-label="Close">‚úñ</span>
  </div>
  <div id="shopContent"></div>
</div>

<div id="inventoryModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="invTitle">
  <div class="modal-header">
    <h2 id="invTitle">PERSONAL EFFECTS</h2>
    <span style="cursor:pointer;color:#ff3333;font-size:20px;" id="closeInv" aria-label="Close">‚úñ</span>
  </div>
  <div id="inventoryContent"></div>
</div>

<div id="gameOverModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="goTitle">
  <div class="modal-header"><h2 id="goTitle">PERMADEATH PROTOCOL</h2></div>
  <div id="gameOverContent"></div>
</div>

<div id="winModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="winTitle">
  <div class="modal-header"><h2 id="winTitle">REVELATION PROTOCOL</h2></div>
  <div id="winContent"></div>
</div>

<div id="hud">
  <div class="hrow"><span>Coherence</span><span id="hudCoherence">100%</span></div>
  <div class="bar"><span id="barCoherence" style="width:100%"></span></div>
  <div class="hrow"><span>Credits</span><span id="hudCredits">100</span></div>
  <div class="bar"><span id="barCredits" style="width:25%"></span></div>
  <div class="hrow"><span>Truths</span><span id="hudProgress">0</span></div>
  <div class="bar"><span id="barProgress" style="width:0%"></span></div>
  <div class="hrow"><span>Notes</span><span id="hudLogs">0/16</span></div>
  <div class="hrow"><span>Achievements</span><span id="hudAch">0</span></div>
  <div class="minimap" id="minimap"></div>
  <div class="ticker" id="ticker"></div>
  <div class="legend" id="legendBox"></div>
</div>

<div id="toasts"></div>

<!-- Scripts in ordine corretto -->
<script src="js/gameData.js"></script>
<script src="js/ui.js"></script>
<script src="js/audio.js"></script>
<script src="js/gameLogic.js"></script>
<script src="js/commands.js"></script>
<script src="js/main.js"></script>
</body>
</html>