<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>LATTICE DESCENT v2.0</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="glitch-overlay" id="glitchOverlay"></div>

<!-- Loading Screen -->
<div id="loadingScreen">
  <div class="loading-text">LATTICE DESCENT</div>
  <div class="loading-bar"><div class="loading-progress" id="loadingBar"></div></div>
  <div style="margin-top:20px;font-size:12px;">INITIALIZING REALITY PROTOCOL...</div>
  <div class="load-cta"><button id="forceStart" class="action-btn">START</button></div>
</div>

<!-- Game Container -->
<div id="gameContainer">
  <div id="header">
    <div class="stats">
      <div class="stat floor-indicator">
        <span class="led green pulse"></span>
        <span>LEVEL:</span> 
        <span id="floor" class="bracket">[B1]</span>
      </div>
      <div class="stat coherence-indicator">
        <span class="led green" id="coherenceLed"></span>
        <span>COHERENCE:</span> 
        <span id="coherence">100</span>%
        <span class="status-symbol" id="coherenceSymbol">‚óè</span>
      </div>
      <div class="stat">
        <span class="symbol">¬¢</span>
        <span>CREDITS:</span> 
        <span id="credits">100</span>
      </div>
      <div class="stat">
        <span class="symbol">‚è±</span>
        <span>CYCLE:</span> 
        <span id="gameTime">00:00</span>
      </div>
    </div>
    <div class="stats">
      <button class="action-btn" id="shopBtn">üìã REQUISITION</button>
      <button class="action-btn" id="invBtn">üì¶ EFFECTS</button>
      <button class="action-btn" id="soundBtn">üîä</button>
      <button class="action-btn" id="hudToggle">üìä MONITOR</button>
    </div>
  </div>

  <div id="terminal"></div>

  <div id="inputArea">
    <span class="prompt">&gt;</span>
    <input type="text" id="commandInput" placeholder="Enter directive..." autocomplete="off" />
    <button class="action-btn" id="executeBtn">COMMIT</button>
  </div>
</div>

<!-- Shop Modal -->
<div id="shopModal" class="modal">
  <div class="modal-header">
    <h2>REQUISITION TERMINAL</h2>
    <span class="modal-close" id="closeShop">‚úñ</span>
  </div>
  <div id="shopContent"></div>
</div>

<!-- Inventory Modal -->
<div id="inventoryModal" class="modal">
  <div class="modal-header">
    <h2>PERSONAL EFFECTS</h2>
    <span class="modal-close" id="closeInv">‚úñ</span>
  </div>
  <div id="inventoryContent"></div>
</div>

<!-- Diary Modal -->
<div id="diaryModal" class="modal">
  <div class="modal-header">
    <h2>PERSONAL DIARY</h2>
    <span class="modal-close" id="closeDiary">‚úñ</span>
  </div>
  <div id="diaryContent"></div>
</div>

<!-- HUD -->
<div id="hud">
  <div class="hrow"><span>Coherence</span><span id="hudCoherence">100%</span></div>
  <div class="bar"><span id="barCoherence" style="width:100%"></span></div>
  <div class="hrow"><span>Credits</span><span id="hudCredits">100</span></div>
  <div class="bar"><span id="barCredits" style="width:25%"></span></div>
  <div class="hrow"><span>Truths</span><span id="hudProgress">0</span></div>
  <div class="bar"><span id="barProgress" style="width:0%"></span></div>
  <div class="hrow"><span>Notes</span><span id="hudLogs">0/16</span></div>
  <div class="hrow"><span>Diary</span><span id="hudDiary">0/10</span></div>
  <div class="minimap" id="minimap"></div>
  <div class="ticker" id="ticker"></div>
  <div class="legend" id="legendBox"></div>
</div>

<div id="toasts"></div>

<!-- Scripts - CRITICAL ORDER -->
<script src="gameData.js"></script>
<script src="gameLogic.js"></script>
<script src="ui.js"></script>
<script src="audio.js"></script>
<script src="commands.js"></script>
<script src="main.js"></script>
</body>
</html>